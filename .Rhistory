library(tidyverse)
library(sf)
test_misiones <- st_read("data/test_region/data_final_preds.geojson")
View(test_misiones)
test_misiones %>% unique()
test_misiones <- test_misiones %>% unique()
test_misiones %>%
pivot_longer(cols = c(RF_pred, XGB_pred),
names_to = "model",
values_to = "pred")
source("~/.active-rstudio-document", echo=TRUE)
View(test_misiones)
test_misiones <- st_read("data/test_region/data_final_preds.geojson")
test_misiones %>%
pivot_longer(cols = c(RF_pred, XGB_pred),
names_to = "model",
values_to = "pred") %>%
ggplot(aes(color = as.factor(pred)))+
geom_sf()+
facet_wrap(vars(model))
region <- st_read("data/otbn/otbn_misiones.geojson")
test_misiones %>%
pivot_longer(cols = c(RF_pred, XGB_pred),
names_to = "model",
values_to = "pred") %>%
ggplot(aes(color = as.factor(pred)))+
geom_sf()+
facet_wrap(vars(model))
library(tidyverse)
library(purrr)
library(sf)
library(sp)
region <- st_read("data/otbn/otbn_misiones.gpkg")
install.packages("stars")
library(stars)
library(sf)
tifpath = system.file("data/otbn/misiones_geotiff.tif", package = "stars")
tifpath = system.file("./data/otbn/misiones_geotiff.tif", package = "stars")
tif=read_stars(tifpath)
tifpath = system.file("data/otbn/misiones_geotiff.tif")
tif=read_stars("data/otbn/misiones_geotiff.tif")
tif
sf=st_as_sf(tif)
View(sf)
library(ggplot2)
ggplot(sf)+
geom_sf()
ggplot(sf)+
geom_sf()
library(tidyverse)
library(ggmap)
region <- st_read("data/otbn/otbn_misiones.geojson")
#region <- st_read("data/otbn/otbn_misiones.geojson")
test_misiones <- st_read("data/test_region/data_final_preds.geojson")
test_misiones %>%
pivot_longer(cols = c(RF_pred, XGB_pred),
names_to = "model",
values_to = "pred") %>%
ggplot(aes(color = as.factor(pred)))+
geom_sf()+
facet_wrap(vars(model))
region <- st_read("data/base_polygons/MISIONES.json")
test_misiones = test_misiones %>%
pivot_longer(cols = c(RF_pred, XGB_pred),
names_to = "model",
values_to = "pred")
ggplot()+
geom_sf(data = region)+
geom_sf(data = test_misiones, aes(color = as.factor(pred)))+
facet_wrap(vars(model))
ggplot()+
geom_sf(data = region)+
geom_sf(data = test_misiones, aes(color = as.factor(pred)))+
facet_wrap(vars(model))+
theme_void()
ggplot()+
geom_sf(data = region)+
geom_sf(data = test_misiones, aes(color = as.factor(pred)))+
facet_wrap(vars(model))+
theme_blank()
ggplot()+
geom_sf(data = region)+
geom_sf(data = test_misiones, aes(color = as.factor(pred)))+
facet_wrap(vars(model))+
theme_minimal()
st_bbox(region)
bbox = st_bbox(region)
bbox <- st_bbox(region)
names <-  c("left", "bottom", "right", "top")
bbox <- st_bbox(region)
names(bbox) <-  c("left", "bottom", "right", "top")
mapa_misiones <- get_stamenmap(bbox, maptype = "toner-background", zoom = 10)
mapa_misiones <- get_stamenmap(bbox, maptype = "toner-background", zoom = 15)
mapa_misiones <- get_stamenmap(bbox, maptype = "toner-background", zoom = 5)
ggmap(mapa_misiones)
mapa_misiones <- get_stamenmap(bbox, maptype = "toner-background", zoom = 8)
ggmap(mapa_misiones)
mis <- st_read("data/test_region/points_misiones.geojson")
bbox <- st_bbox(region)
names(bbox) <-  c("left", "bottom", "right", "top")
mapa_misiones <- get_stamenmap(bbox, maptype = "toner-background", zoom = 8)
ggmap(mapa_misiones)
test_misiones <- test_misiones %>% unique()
test_misiones <- test_misiones %>%
pivot_longer(cols = c(RF_pred, XGB_pred),
names_to = "model",
values_to = "pred")
test_misiones <- st_read("data/test_region/data_final_preds.geojson")
test_misiones <- test_misiones %>% unique()
test_misiones <- test_misiones %>%
pivot_longer(cols = c(RF_pred, XGB_pred),
names_to = "model",
values_to = "pred")
ggmap(mapa_misiones)+
geom_sf(data = test_misiones, aes(color = as.factor(pred)))+
facet_wrap(vars(model))+
theme_minimal()
ggmap(mapa_misiones)+
geom_sf(data = test_misiones, aes(color = as.factor(pred)), inherit.aes = F)+
facet_wrap(vars(model))+
theme_minimal()
ggmap(mapa_misiones)+
geom_sf(data = test_misiones %>%
filter(pred == 1),
aes(color = as.factor(pred)), inherit.aes = F)+
facet_wrap(vars(model))+
theme_minimal()
ggmap(mapa_misiones)+
geom_sf(data = test_misiones %>%
filter(pred == 1),
color = "red4",
inherit.aes = F)+
facet_wrap(vars(model))+
theme_minimal()
ggmap(mapa_misiones)+
geom_sf(data = test_misiones %>%
filter(pred == 1),
color = "red3",
inherit.aes = F)+
facet_wrap(vars(model))+
theme_minimal()
ggmap(mapa_misiones)+
geom_sf(data = test_misiones,
aes(color = as.factor(pred)),
inherit.aes = F)+
facet_wrap(vars(model))+
theme_minimal()
ggmap(mapa_misiones)+
geom_sf(data = test_misiones,
aes(color = as.factor(pred)),
inherit.aes = F)+
scale_color_manual(values = c(1 = "red3", 0 = "snow3", 2 = "snow3"))
pal <- c(1 = "red3", 0 = "snow3", 2 = "snow3")
pal <- c(1 == "red3", 0 == "snow3", 2 == "snow3")
ggmap(mapa_misiones)+
geom_sf(data = test_misiones,
aes(color = as.factor(pred)),
inherit.aes = F)+
scale_color_manual(values = pal)
pal <- c("1" = "red3", "0" = "snow3", "2" = "snow3")
ggmap(mapa_misiones)+
geom_sf(data = test_misiones,
aes(color = as.factor(pred)),
inherit.aes = F)+
scale_color_manual(values = pal)
ggmap(mapa_misiones)+
geom_sf(data = test_misiones,
aes(color = as.factor(pred)),
inherit.aes = F)+
scale_color_manual(values = pal)+
facet_wrap(vars(model))+
theme_minimal()
ggmap(mapa_misiones)+
geom_sf(data = test_misiones,
aes(color = as.factor(pred)),
inherit.aes = F)+
#scale_color_manual(values = pal)+
facet_wrap(vars(model))+
theme_minimal()
ggmap(mapa_misiones)+
geom_sf(data = test_misiones,
aes(color = as.factor(pred)),
inherit.aes = F)+
facet_wrap(vars(model))+
scale_color_manual(values = pal)+
theme_minimal()
ggmap(mapa_misiones)+
geom_sf(data = test_misiones,
aes(color = as.factor(pred)),
inherit.aes = F)+
facet_wrap(vars(model))+
scale_color_manual(values = pal)+
theme_void()
pal <- c("1" = "red3", "0" = "snow2", "2" = "snow2")
ggmap(mapa_misiones)+
geom_sf(data = test_misiones,
aes(color = as.factor(pred)),
inherit.aes = F)+
facet_wrap(vars(model))+
scale_color_manual(values = pal)+
theme_void()
test_misiones <- test_misiones %>%
pivot_longer(cols = c(RF_pred, XGB_pred),
names_to = "model",
values_to = "pred") %>%
mutate(model = case_when(
model == "RF_pred" ~ "Random Forest",
model == "XGB_pred" ~ "XGB"
))
region <- st_read("data/base_polygons/MISIONES.json")
test_misiones <- st_read("data/test_region/data_final_preds.geojson")
test_misiones <- test_misiones %>% unique()
test_misiones <- test_misiones %>%
pivot_longer(cols = c(RF_pred, XGB_pred),
names_to = "model",
values_to = "pred") %>%
mutate(model = case_when(
model == "RF_pred" ~ "Random Forest",
model == "XGB_pred" ~ "XGB"
))
bbox <- st_bbox(region)
names(bbox) <-  c("left", "bottom", "right", "top")
mapa_misiones <- get_stamenmap(bbox, maptype = "toner-background", zoom = 8)
pal <- c("1" = "red3", "0" = "snow2", "2" = "snow2")
ggmap(mapa_misiones)+
geom_sf(data = test_misiones,
aes(color = as.factor(pred)),
inherit.aes = F)+
facet_wrap(vars(model))+
scale_color_manual(values = pal)+
theme_void()
ggmap(mapa_misiones)+
geom_sf(data = test_misiones,
aes(color = as.factor(pred)),
inherit.aes = F)+
facet_wrap(vars(model))+
scale_color_manual(values = pal)+
theme_void()+
guides(color = "none")
library(tidyverse)
library(purrr)
library(sf)
library(sp)
region <- st_read("data/base_polygons/MISIONES.json")
sample_points <- st_sample(region, size = 3000, "random")
sample <- st_as_sf(sample_points) %>%
rename(geometry = x) %>%
mutate(provincia = "Misiones")
sample <- st_transform(sample, crs = "WGS84")
st_write(sample, "data/test_region/points_misiones.geojson", append = F)
sample %>% unique()
sample %>% distinct()
data <- st_read("data/test_region/data_final.geojson")
View(data)
data <- st_read("data/test_region/data_final.geojson")
View(data)
#library(stars)
library(sf)
library(ggplot2)
library(tidyverse)
library(ggmap)
region <- st_read("data/base_polygons/MISIONES.json")
test_misiones <- st_read("data/test_region/data_final_preds.geojson")
test_misiones <- test_misiones %>% unique()
test_misiones <- test_misiones %>%
pivot_longer(cols = c(RF_pred, XGB_pred),
names_to = "model",
values_to = "pred") %>%
mutate(model = case_when(
model == "RF_pred" ~ "Random Forest",
model == "XGB_pred" ~ "XGB"
))
bbox <- st_bbox(region)
names(bbox) <-  c("left", "bottom", "right", "top")
mapa_misiones <- get_stamenmap(bbox, maptype = "toner-background", zoom = 8)
pal <- c("1" = "red3", "0" = "snow2", "2" = "snow2")
ggmap(mapa_misiones)+
geom_sf(data = test_misiones,
aes(color = as.factor(pred)),
inherit.aes = F)+
facet_wrap(vars(model))+
scale_color_manual(values = pal)+
theme_void()+
guides(color = "none")
ggmap(mapa_misiones)+
geom_sf(data = test_misiones %>% filter(pred == 1),
color = "red3",
inherit.aes = F)+
facet_wrap(vars(model))+
#scale_color_manual(values = pal)+
theme_void()+
guides(color = "none")
library(tidyverse)
library(purrr)
library(sf)
library(sp)
region <- st_read("data/base_polygons/ENTRERIOS.json")
library(tidyverse)
library(purrr)
library(sf)
library(sp)
region <- st_read("data/base_polygons/ENTRERIOS.json")
sample_points <- st_sample(region, size = 3000, "random")
sample <- st_as_sf(sample_points) %>%
rename(geometry = x) %>%
mutate(provincia = "Misiones")
sample <- st_transform(sample, crs = "WGS84")
st_write(sample, "data/test_region/points_entrerios.geojson", append = F)
region1 <- st_read("data/base_polygons/MISIONES.json")
region2 <- st_read("data/base_polygons/ENTRERIOS.json")
rbind(region1, region2)
region <- rbind(region1, region2)
bbox <- st_bbox(region)
names(bbox) <-  c("left", "bottom", "right", "top")
mapa <- get_stamenmap(bbox, maptype = "toner-background", zoom = 8)
ggmap(mapa)
mapa <- get_stamenmap(bbox, maptype = "toner-background", zoom = 5)
ggmap(mapa)
mapa <- get_stamenmap(bbox, maptype = "toner-background", zoom = 7)
ggmap(mapa)
ggmap(mapa)+
geom_sf(data = test_misiones %>% filter(pred == 1),
color = "red3",
inherit.aes = F)+
facet_wrap(vars(model))+
theme_void()+
guides(color = "none")
region <- rbind(region1, region2)
test_misiones <- st_read("data/test_region/data_final_preds.geojson")
test_misiones <- test_misiones %>% unique()
test_misiones <- test_misiones %>%
pivot_longer(cols = c(RF_pred, XGB_pred),
names_to = "model",
values_to = "pred") %>%
mutate(model = case_when(
model == "RF_pred" ~ "Random Forest",
model == "XGB_pred" ~ "XGB"
))
ggmap(mapa)+
geom_sf(data = test_misiones %>% filter(pred == 1),
color = "red3",
inherit.aes = F)+
facet_wrap(vars(model))+
theme_void()+
guides(color = "none")
ggmap(mapa)+
geom_sf(data = test_misiones %>% filter(pred == 1),
color = "red3",
inherit.aes = F,
size = 0.5)+
facet_wrap(vars(model))+
theme_void()+
guides(color = "none")
ggplot(region1, color = NA)+
geom_sf(data = test_misiones %>% filter(pred == 1),
color = "red3",
inherit.aes = F,
size = 0.5)+
facet_wrap(vars(model))+
theme_void()+
guides(color = "none")
ggplot(region1)+
geom_sf(data = test_misiones %>% filter(pred == 1),
color = "red3",
inherit.aes = F,
size = 0.5)+
facet_wrap(vars(model))+
theme_void()+
guides(color = "none")
ggplot(data = region1)+
geom_sf(data = test_misiones %>% filter(pred == 1),
color = "red3",
#inherit.aes = F,
size = 0.5)+
facet_wrap(vars(model))+
theme_void()+
guides(color = "none")
ggplot()+
geom_sf(data = region1)+
geom_sf(data = test_misiones %>% filter(pred == 1),
color = "red3",
#inherit.aes = F,
size = 0.5)+
facet_wrap(vars(model))+
theme_void()+
guides(color = "none")
ggplot()+
geom_sf(data = region)+
geom_sf(data = test_misiones %>% filter(pred == 1),
color = "red3",
#inherit.aes = F,
size = 0.5)+
facet_wrap(vars(model))+
theme_void()+
guides(color = "none")
ggplot()+
geom_sf(data = region1)+
geom_sf(data = test_misiones %>% filter(pred == 1),
color = "red3",
#inherit.aes = F,
size = 0.5)+
facet_wrap(vars(model))+
theme_void()+
guides(color = "none")
ggplot()+
geom_sf(data = region1)+
geom_sf(data = test_misiones %>% filter(pred == 1),
color = "red3",
#inherit.aes = F,
size = 0.5)+
facet_wrap(vars(model))+
theme_minimal()+
guides(color = "none")
ggsave("img/10_test_region_misiones.png",
width = 8,
height=6)
library(sf)
data <- sf_read("data/test_region/ndvi/ndvi_model_0-2.geojson")
library(sf)
data <- sf_read("data/test_region/ndvi/ndvi_model_0-2.geojson")
data <- read_sf("data/test_region/ndvi/ndvi_model_0-2.geojson")
View(data)
